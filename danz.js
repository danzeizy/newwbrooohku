function _0x3a12(_0x37e758,_0x400e53){const _0x8e13c8=_0x8e13();return _0x3a12=function(_0x3a129f,_0x3616c2){_0x3a129f=_0x3a129f-0x94;let _0x86da92=_0x8e13c8[_0x3a129f];return _0x86da92;},_0x3a12(_0x37e758,_0x400e53);}const _0x4654ea=_0x3a12;(function(_0x3ad4f0,_0x52359b){const _0x1a8056=_0x3a12,_0xecdc23=_0x3ad4f0();while(!![]){try{const _0x32922e=parseInt(_0x1a8056(0x117))/0x1*(parseInt(_0x1a8056(0xc1))/0x2)+parseInt(_0x1a8056(0x109))/0x3*(parseInt(_0x1a8056(0xba))/0x4)+parseInt(_0x1a8056(0xdc))/0x5+parseInt(_0x1a8056(0xfc))/0x6*(parseInt(_0x1a8056(0xd6))/0x7)+parseInt(_0x1a8056(0x98))/0x8*(-parseInt(_0x1a8056(0xc3))/0x9)+-parseInt(_0x1a8056(0xe7))/0xa+-parseInt(_0x1a8056(0xb6))/0xb;if(_0x32922e===_0x52359b)break;else _0xecdc23['push'](_0xecdc23['shift']());}catch(_0x3dd800){_0xecdc23['push'](_0xecdc23['shift']());}}}(_0x8e13,0x213c0));const express=require(_0x4654ea(0xf7)),mongoose=require(_0x4654ea(0xe5)),session=require(_0x4654ea(0xc2)),flash=require(_0x4654ea(0xdb)),bcrypt=require(_0x4654ea(0x107)),QRCode=require(_0x4654ea(0xa3)),path=require(_0x4654ea(0xff)),axios=require(_0x4654ea(0xb8)),fs=require('fs'),makeString=require(_0x4654ea(0x95)),app=express(),PORT=0xbb8;mongoose[_0x4654ea(0x9a)]('mongodb+srv://myapibot:danz08585512334@data-apibot.fmydf.mongodb.net/mydatabase?retryWrites=true&w=majority&appName=Data-apibot',{'useNewUrlParser':!![],'useUnifiedTopology':!![]})[_0x4654ea(0xb3)](()=>console[_0x4654ea(0xdd)](_0x4654ea(0x115)))[_0x4654ea(0xfb)](_0x27b3c2=>console['error'](_0x4654ea(0x9e),_0x27b3c2));const userSchema=new mongoose[(_0x4654ea(0x108))]({'username':String,'password':String,'apikey':String,'totalrequest':{'type':Number,'default':0x0},'maxrequest':{'type':Number,'default':0x14},'type':{'type':String,'default':_0x4654ea(0x10a)},'createdAt':{'type':Date,'default':Date[_0x4654ea(0xd3)]},'active':{'type':Number,'default':0x2}}),User=mongoose[_0x4654ea(0xa8)](_0x4654ea(0xbf),userSchema);app['use'](session({'secret':_0x4654ea(0xd1),'resave':![],'saveUninitialized':!![]})),app[_0x4654ea(0xe0)](flash()),app[_0x4654ea(0x119)](_0x4654ea(0x9f),_0x4654ea(0x111)),app[_0x4654ea(0xe0)](express[_0x4654ea(0xce)]({'extended':!![]})),app[_0x4654ea(0xe0)](express['static'](_0x4654ea(0x9b))),((async()=>{const _0x2193dc=_0x4654ea,_0x546632=await User[_0x2193dc(0xd9)]({'username':_0x2193dc(0xda)});if(!_0x546632){const _0x476e9a=await bcrypt[_0x2193dc(0xc6)]('Danz#085855',0xa);await User[_0x2193dc(0x100)]({'username':_0x2193dc(0xda),'password':_0x476e9a,'apikey':_0x2193dc(0xc5),'totalrequest':0x0,'maxrequest':0x82,'type':_0x2193dc(0xac),'active':0x270f}),console['log'](_0x2193dc(0x99));}})()),app[_0x4654ea(0xe9)]('/',(_0x105e6b,_0x49dc4c)=>{const _0x1904f4=_0x4654ea;_0x49dc4c[_0x1904f4(0xf5)](_0x1904f4(0xfd),{'success_msg':_0x105e6b[_0x1904f4(0xbc)](_0x1904f4(0xa4)),'error_msg':_0x105e6b['flash'](_0x1904f4(0xae))});});const outputDir=path[_0x4654ea(0x116)](__dirname,_0x4654ea(0x10f));!fs[_0x4654ea(0x112)](outputDir)&&fs[_0x4654ea(0xab)](outputDir);function _0x8e13(){const _0x39c60f=['trim','writeFileSync','destroy','catch','192uqUlBH','login','5802ID','path','create','listen','1\x20Jam','Format\x20qrstring\x20tidak\x20valid','Error\x20saat\x20logout:','json','.png','bcryptjs','Schema','45183hyAqwH','free','processing','qris_','Minimal\x20nominal\x20adalah\x202000','replace','output','Username\x20sudah\x20digunakan!','ejs','existsSync','static','error','MongoDB\x20Connected','join','23ltPbfs','Menunggu\x20Jawaban','set','/orderkuota','./src/makeString','/api/ordtransaksi','toFile','8tQtgzl','Developer\x20account\x20created','connect','public','Limit\x20request\x20tercapai','compare','MongoDB\x20Connection\x20Error:','view\x20engine','random','Server\x20running\x20on\x20http://localhost:','Login\x20gagal!\x20Username\x20atau\x20password\x20salah.','qrcode','success_msg','active','./output/','orderkuota','model','SUKSES','akan\x20diproses','mkdirSync','premium','API\x20Key\x20tidak\x20boleh\x20kosong!','error_msg','includes','Silakan\x20login\x20terlebih\x20dahulu.','User\x20tidak\x20ditemukan.','save','then','query','failed','1226566eKyvhk','message','axios','parse','12nVxWzy','GAGAL','flash','expired','updateMany','User','://','19674DNaKyR','express-session','1083573IzKCLj','maxrequest','DEV12345','hash','QRIS\x20berhasil\x20dibuat','session','/output','redirect','body','toString','/register','urlencoded','totalrequest','pending','your_secret_key','https://h2h.okeconnect.com/trx','now','data','success','42539ajEVft','substring','Parameter\x20refID,\x20product,\x20dest,\x20memberID,\x20pin,\x20dan\x20password\x20diperlukan','findOne','admin','connect-flash','252560kOdfqW','log','DanzFyz','unknown','use','stringify','valid','./data/visitors.json','host','mongoose','home','1483790dstoxh','Semua\x20parameter\x20harus\x20diisi','get','refid','API\x20key\x20tidak\x20valid','status','post','register','/home','/api/ordcheck','API\x20Key\x20masih\x20aktif.','protocol','user','Terjadi\x20kesalahan\x20saat\x20mengambil\x20data','render','/logout','express'];_0x8e13=function(){return _0x39c60f;};return _0x8e13();}app[_0x4654ea(0xe0)](_0x4654ea(0xc9),express[_0x4654ea(0x113)]('output')),app['get'](_0x4654ea(0xcd),(_0x1d4b27,_0x17bfab)=>{const _0x4c75a1=_0x4654ea;_0x17bfab[_0x4c75a1(0xf5)](_0x4c75a1(0xee),{'success_msg':_0x1d4b27[_0x4c75a1(0xbc)](_0x4c75a1(0xa4)),'error_msg':_0x1d4b27['flash'](_0x4c75a1(0xae))});}),app[_0x4654ea(0xe9)]('/login',(_0x1e0eb2,_0x4175d9)=>{const _0x20352a=_0x4654ea;_0x4175d9[_0x20352a(0xf5)](_0x20352a(0xfd),{'success_msg':_0x1e0eb2[_0x20352a(0xbc)](_0x20352a(0xa4)),'error_msg':_0x1e0eb2[_0x20352a(0xbc)](_0x20352a(0xae))});}),app[_0x4654ea(0xe9)](_0x4654ea(0x94),(_0x15dbc,_0x389207)=>_0x389207[_0x4654ea(0xf5)](_0x4654ea(0xa7),{'baseUrl':_0x15dbc[_0x4654ea(0xf2)]+_0x4654ea(0xc0)+_0x15dbc['get'](_0x4654ea(0xe4))})),app[_0x4654ea(0xe9)](_0x4654ea(0xef),async(_0x57a5bf,_0x52a66c)=>{const _0x3fd617=_0x4654ea;if(!_0x57a5bf[_0x3fd617(0xc8)]['user'])return _0x57a5bf[_0x3fd617(0xbc)](_0x3fd617(0xae),_0x3fd617(0xb0)),_0x52a66c[_0x3fd617(0xca)]('/');const _0x5bec64=await User[_0x3fd617(0xd9)]({'username':_0x57a5bf[_0x3fd617(0xc8)][_0x3fd617(0xf3)]['username']});if(!_0x5bec64)return _0x57a5bf[_0x3fd617(0xbc)](_0x3fd617(0xae),_0x3fd617(0xb1)),_0x52a66c[_0x3fd617(0xca)]('/');const _0x2e45a2=require('fs'),_0x3f2689=_0x3fd617(0xe3);let _0x3b16a6=0x0;_0x2e45a2[_0x3fd617(0x112)](_0x3f2689)&&(_0x3b16a6=JSON['parse'](_0x2e45a2['readFileSync'](_0x3f2689))['count']),_0x3b16a6++,_0x2e45a2[_0x3fd617(0xf9)](_0x3f2689,JSON[_0x3fd617(0xe1)]({'count':_0x3b16a6})),_0x52a66c[_0x3fd617(0xf5)](_0x3fd617(0xe6),{'user':_0x57a5bf['session'][_0x3fd617(0xf3)],'baseUrl':_0x57a5bf['protocol']+_0x3fd617(0xc0)+_0x57a5bf[_0x3fd617(0xe9)](_0x3fd617(0xe4)),'visitors':_0x3b16a6,'totalrequest':_0x5bec64['totalrequest'],'maxrequest':_0x5bec64['maxrequest']});}),app[_0x4654ea(0xed)](_0x4654ea(0xcd),async(_0x5543ee,_0x195517)=>{const _0x10a8ad=_0x4654ea,{username:_0x11ddce,password:_0x42dbf8}=_0x5543ee[_0x10a8ad(0xcb)],_0x2228d6=await User['findOne']({'username':_0x11ddce});if(_0x2228d6)return _0x5543ee['flash'](_0x10a8ad(0xae),_0x10a8ad(0x110)),_0x195517[_0x10a8ad(0xca)]('/register');const _0x3024aa=await bcrypt[_0x10a8ad(0xc6)](_0x42dbf8,0xa);await User[_0x10a8ad(0x100)]({'username':_0x11ddce,'password':_0x3024aa,'apikey':Math[_0x10a8ad(0xa0)]()[_0x10a8ad(0xcc)](0x24)[_0x10a8ad(0xd7)](0x2,0xa)}),_0x5543ee[_0x10a8ad(0xbc)](_0x10a8ad(0xa4),'Registrasi\x20berhasil!\x20Silakan\x20login.'),_0x195517[_0x10a8ad(0xca)]('/');}),app['post']('/login',async(_0xa9b5f6,_0x40087)=>{const _0xce1c40=_0x4654ea,{username:_0x18a115,password:_0x39b686}=_0xa9b5f6['body'],_0x474127=await User['findOne']({'username':_0x18a115});if(!_0x474127||!await bcrypt[_0xce1c40(0x9d)](_0x39b686,_0x474127['password']))return _0xa9b5f6['flash'](_0xce1c40(0xae),_0xce1c40(0xa2)),_0x40087['redirect']('/');_0xa9b5f6[_0xce1c40(0xc8)][_0xce1c40(0xf3)]=_0x474127,_0x40087['redirect']('/home');}),app[_0x4654ea(0xe9)](_0x4654ea(0xf6),(_0x53695b,_0x13d58d)=>{const _0x525a81=_0x4654ea;_0x53695b[_0x525a81(0xc8)][_0x525a81(0xfa)](_0x199664=>{const _0x1a4f30=_0x525a81;if(_0x199664)return console[_0x1a4f30(0x114)](_0x1a4f30(0x104),_0x199664),_0x13d58d[_0x1a4f30(0xca)]('/home');_0x13d58d[_0x1a4f30(0xca)]('/');});}),app[_0x4654ea(0xe9)]('/check-apikey',async(_0x240506,_0x338e23)=>{const _0x417986=_0x4654ea,{apikey:_0x1b4eb2}=_0x240506[_0x417986(0xb4)];if(!_0x1b4eb2)return _0x338e23[_0x417986(0x105)]({'status':_0x417986(0x114),'message':_0x417986(0xad)});const _0x42c790=await User[_0x417986(0xd9)]({'apikey':_0x1b4eb2});if(!_0x42c790)return _0x338e23[_0x417986(0x105)]({'status':_0x417986(0x114),'message':'API\x20Key\x20tidak\x20valid!'});_0x338e23[_0x417986(0x105)]({'status':_0x42c790[_0x417986(0xa5)]>0x0?_0x417986(0xe2):_0x417986(0xbd),'message':_0x42c790[_0x417986(0xa5)]>0x0?_0x417986(0xf1):'API\x20Key\x20sudah\x20expired!','totalrequest':_0x42c790[_0x417986(0xcf)],'maxrequest':_0x42c790[_0x417986(0xc4)],'activeDays':_0x42c790[_0x417986(0xa5)]});}),app[_0x4654ea(0xe9)]('/api/qris',async(_0x43f3dc,_0x40484c)=>{const _0x43cf70=_0x4654ea,{qrstring:_0x819f09,nominal:_0x282670,fee:_0x22b642,key:_0x106439}=_0x43f3dc[_0x43cf70(0xb4)],_0x336082=await User[_0x43cf70(0xd9)]({'apikey':_0x106439});if(!_0x336082)return _0x40484c[_0x43cf70(0xec)](0x191)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':_0x43cf70(0xeb)}});if(_0x336082[_0x43cf70(0xcf)]>=_0x336082[_0x43cf70(0xc4)])return _0x40484c[_0x43cf70(0xec)](0x193)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':_0x43cf70(0x9c)}});if(!_0x819f09||!_0x282670)return _0x40484c[_0x43cf70(0xec)](0x190)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':'Parameter\x20qrstring\x20dan\x20nominal\x20diperlukan'}});if(!_0x819f09[_0x43cf70(0xaf)](_0x43cf70(0xfe)))return _0x40484c['status'](0x190)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':_0x43cf70(0x103)}});if(_0x282670<0x7d0)return _0x40484c['status'](0x190)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':_0x43cf70(0x10d)}});try{const _0x5b414b=parseInt(_0x282670)+(parseInt(_0x22b642)||0x0),_0xb37208=makeString(_0x819f09,{'nominal':_0x5b414b['toString'](),'taxtype':'f','fee':_0x22b642||'0'}),_0x24a35c=_0x43cf70(0x10c)+Date[_0x43cf70(0xd3)]()+_0x43cf70(0x106),_0x211fc1=_0x43cf70(0xa6)+_0x24a35c;await QRCode[_0x43cf70(0x97)](_0x211fc1,_0xb37208);const _0x152aa5=_0x43f3dc[_0x43cf70(0xf2)]+'://'+_0x43f3dc[_0x43cf70(0xe9)](_0x43cf70(0xe4))+'/output/'+_0x24a35c;setTimeout(()=>fs['unlinkSync'](_0x211fc1),0x36ee80),_0x336082[_0x43cf70(0xcf)]++,await _0x336082[_0x43cf70(0xb2)](),_0x40484c[_0x43cf70(0x105)]({'danzfyz':{'success':!![],'message':_0x43cf70(0xc7),'creator':_0x43cf70(0xde),'total_nominal':_0x5b414b,'expired':_0x43cf70(0x102),'qrismu':_0x152aa5,'total_request':_0x336082[_0x43cf70(0xcf)],'max_request':_0x336082[_0x43cf70(0xc4)]}});}catch(_0x3548e0){_0x40484c[_0x43cf70(0xec)](0x1f4)[_0x43cf70(0x105)]({'danzfyz':{'success':![],'message':_0x3548e0[_0x43cf70(0xb7)]}});}}),app['get'](_0x4654ea(0x96),async(_0x2003d4,_0x3e8435)=>{const _0x458216=_0x4654ea,{product:_0x1351d1,dest:_0xb58463,refID:_0x3e8370,memberID:_0x313c02,pin:_0xb19712,password:_0x1ca842,key:_0x33eb7d}=_0x2003d4[_0x458216(0xb4)];if(!_0x1351d1||!_0xb58463||!_0x3e8370||!_0x313c02||!_0xb19712||!_0x1ca842||!_0x33eb7d)return _0x3e8435['status'](0x190)[_0x458216(0x105)]({'success':![],'message':_0x458216(0xe8)});const _0x317cc7=await User[_0x458216(0xd9)]({'apikey':_0x33eb7d});if(!_0x317cc7)return _0x3e8435[_0x458216(0xec)](0x191)['json']({'success':![],'message':_0x458216(0xeb)});if(_0x317cc7[_0x458216(0xcf)]>=_0x317cc7[_0x458216(0xc4)])return _0x3e8435[_0x458216(0xec)](0x193)[_0x458216(0x105)]({'success':![],'message':_0x458216(0x9c)});try{const _0x26a139=await axios[_0x458216(0xe9)](_0x458216(0xd2),{'params':{'product':_0x1351d1,'dest':_0xb58463,'refID':_0x3e8370,'memberID':_0x313c02,'pin':_0xb19712,'password':_0x1ca842},'responseType':'text'});let _0x3bfe3e;try{const _0x152118=JSON[_0x458216(0xb9)](_0x26a139[_0x458216(0xd4)]);let _0x99f254=_0x152118['message'][_0x458216(0x10e)](/Saldo .*$/,'')['trim']();_0x3bfe3e={'status':_0x152118[_0x458216(0xb7)][_0x458216(0xaf)](_0x458216(0xa9))?_0x458216(0xd5):_0x458216(0xb5),'refid':_0x152118[_0x458216(0xea)]||null,'message':_0x99f254};}catch(_0x1ce336){let _0x3e3eae=_0x26a139[_0x458216(0xd4)][_0x458216(0x10e)](/Saldo .*$/,'')[_0x458216(0xf8)](),_0x4bb693;if(_0x3e3eae[_0x458216(0xaf)](_0x458216(0xa9)))_0x4bb693=_0x458216(0xd5);else{if(_0x3e3eae['includes'](_0x458216(0xbb)))_0x4bb693=_0x458216(0xb5);else{if(_0x3e3eae[_0x458216(0xaf)](_0x458216(0xaa)))_0x4bb693=_0x458216(0x10b);else _0x3e3eae['includes'](_0x458216(0x118))?_0x4bb693=_0x458216(0xd0):_0x4bb693=_0x458216(0xdf);}}_0x3bfe3e={'status':_0x4bb693,'message':_0x3e3eae};}await Transaction['create']({'refid':_0x3e8370,'status':_0x3bfe3e[_0x458216(0xec)],'message':_0x3bfe3e[_0x458216(0xb7)]}),_0x317cc7['totalrequest']++,await _0x317cc7[_0x458216(0xb2)](),_0x3e8435['json']({'success':!![],'result':_0x3bfe3e,'total_request':_0x317cc7[_0x458216(0xcf)],'max_request':_0x317cc7[_0x458216(0xc4)]});}catch(_0x1f4660){_0x3e8435[_0x458216(0xec)](0x1f4)['json']({'success':![],'message':_0x458216(0xf4),'error':_0x1f4660['message']});}}),app[_0x4654ea(0xe9)](_0x4654ea(0xf0),async(_0x3f6527,_0x323a90)=>{const _0x3533f9=_0x4654ea,{refID:_0x444aa4,product:_0xd22674,dest:_0x9dbe09,memberID:_0x445ce4,pin:_0x5541d8,password:_0x5ebf80}=_0x3f6527['query'];if(!_0x444aa4||!_0xd22674||!_0x9dbe09||!_0x445ce4||!_0x5541d8||!_0x5ebf80)return _0x323a90[_0x3533f9(0xec)](0x190)['json']({'success':![],'message':_0x3533f9(0xd8)});try{const _0x5406c0=await axios[_0x3533f9(0xe9)](_0x3533f9(0xd2),{'params':{'refID':_0x444aa4,'product':_0xd22674,'dest':_0x9dbe09,'memberID':_0x445ce4,'pin':_0x5541d8,'password':_0x5ebf80},'responseType':'text'});let _0x146e7b,_0x1f682f,_0xb61b8b=_0x5406c0['data']['replace'](/Saldo .*$/,'')[_0x3533f9(0xf8)]();if(_0xb61b8b[_0x3533f9(0xaf)]('SUKSES'))_0x146e7b='success';else{if(_0xb61b8b[_0x3533f9(0xaf)](_0x3533f9(0xbb)))_0x146e7b=_0x3533f9(0xb5);else{if(_0xb61b8b['includes'](_0x3533f9(0xaa)))_0x146e7b=_0x3533f9(0x10b);else _0xb61b8b[_0x3533f9(0xaf)](_0x3533f9(0x118))?_0x146e7b=_0x3533f9(0xd0):_0x146e7b=_0x3533f9(0xdf);}}_0x1f682f=_0xb61b8b,_0x323a90[_0x3533f9(0x105)]({'success':!![],'refID':_0x444aa4,'status':_0x146e7b,'message':_0x1f682f});}catch(_0x135e6e){_0x323a90[_0x3533f9(0xec)](0x1f4)[_0x3533f9(0x105)]({'success':![],'message':'Terjadi\x20kesalahan\x20saat\x20mengecek\x20status','error':_0x135e6e[_0x3533f9(0xb7)]});}}),setInterval(async()=>{const _0x325581=_0x4654ea;await User[_0x325581(0xbe)]({'type':_0x325581(0x10a),'active':{'$gt':0x0}},{'$inc':{'active':-0x1}});},0x18*0x3c*0x3c*0x3e8),app[_0x4654ea(0x101)](PORT,()=>console[_0x4654ea(0xdd)](_0x4654ea(0xa1)+PORT));